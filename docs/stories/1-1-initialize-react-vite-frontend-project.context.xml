<story-context id="bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>1.1</storyId>
    <title>Initialize React + Vite Frontend Project</title>
    <status>drafted</status>
    <generatedAt>2025-11-04</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/stories/1-1-initialize-react-vite-frontend-project.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>developer</asA>
    <iWant>a properly configured React + Vite project with TypeScript</iWant>
    <soThat>I can build modern, type-safe frontend features efficiently</soThat>
    <tasks>
- Task 1: Initialize Vite + React + TypeScript project (AC: #1)
  - Run `npm create vite@latest frontend -- --template react-ts`
  - Navigate to frontend directory and run `npm install`
  - Verify `package.json` contains React 18.3.1+ and TypeScript 5.7.x+
  - Create base project structure: `src/components/ui/`, `src/components/custom/`, `src/logic/`, `src/lib/`, `src/types/`, `src/assets/`

- Task 2: Configure Tailwind CSS v4.0 (AC: #2)
  - Install Tailwind CSS: `npm install -D tailwindcss@4 postcss autoprefixer`
  - Initialize Tailwind: `npx tailwindcss init`
  - Configure `tailwind.config.js` with content paths
  - Update `src/index.css` with Tailwind directives
  - Verify Tailwind classes render correctly in `App.tsx`

- Task 3: Install and configure shadcn/ui (AC: #3)
  - Run `npx shadcn-ui@latest init` (select Tailwind CSS, TypeScript)
  - Install initial components: button, input, dialog, toast, card, label
  - Verify components are importable from `@/components/ui/`
  - Test render a Button component in `App.tsx`

- Task 4: Install Kea state management (AC: #4)
  - Install Kea: `npm install kea@3.1.6 kea-typegen@3.1.6`
  - Create `src/logic/appLogic.ts` as parent logic store
  - Configure `kea-typegen` in `package.json` scripts
  - Verify Kea imports work without errors

- Task 5: Configure ESLint and Prettier (AC: #5)
  - Verify ESLint is configured (Vite template includes it)
  - Install Prettier: `npm install -D prettier eslint-config-prettier`
  - Create `.prettierrc` with project standards
  - Add Prettier script to `package.json`
  - Run `npm run format` to verify

- Task 6: Verify development server and HMR (AC: #6, #7)
  - Run `npm run dev`
  - Verify server starts on `http://localhost:5173`
  - Make a change to `App.tsx` and verify HMR updates instantly
  - Test that no console errors appear
    </tasks>
  </story>

  <acceptanceCriteria>
1. Vite project created with React 18.3.1 and TypeScript 5.7.x
2. Tailwind CSS v4.0 configured with custom design tokens
3. shadcn/ui component library installed and configured
4. Kea state management library installed (version 3.1.6)
5. ESLint and Prettier configured for code quality
6. `npm run dev` starts development server successfully on `http://localhost:5173`
7. Hot Module Replacement (HMR) works for instant feedback
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/tech-spec-epic-1.md</path>
        <title>Epic Technical Specification: Foundation &amp; Infrastructure Setup</title>
        <section>Story 1.1: Initialize React + Vite Frontend Project</section>
        <snippet>Epic 1 establishes the foundational technical infrastructure for the SuperTutors platform, creating the development environment and deployment pipeline. Story 1.1 initializes React 18.3.1 + Vite 6.x + TypeScript 5.7.x frontend with shadcn/ui and Tailwind CSS v4.0.</snippet>
      </doc>
      <doc>
        <path>docs/tech-spec-epic-1.md</path>
        <title>Frontend Dependencies</title>
        <section>Frontend Dependencies (Story 1.1)</section>
        <snippet>Core dependencies: react ^18.3.1, react-dom ^18.3.1, kea ^3.1.6, kea-typegen ^3.1.6, vite ^6.0.0, typescript ^5.7.0, tailwindcss ^4.0.0. shadcn/ui components installed via CLI (Button, Input, Dialog, Toast, Card, Label).</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>SuperTutors - Solution Architecture</title>
        <section>Project Structure - Frontend</section>
        <snippet>Frontend structure: src/components/ui/ (shadcn/ui), src/components/custom/ (ChatCanvas, CelebrationOverlay, etc.), src/logic/ (Kea stores), src/lib/ (api.ts, socket.ts, utils.ts), src/types/, src/assets/. Naming conventions: React Components PascalCase, Kea Logic Stores camelCase + "Logic" suffix.</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Technology Stack Details</title>
        <section>Frontend Stack</section>
        <snippet>React 18.3.1 (concurrent rendering for smooth animations), TypeScript 5.7.x (type safety for complex state), Vite 6.x (lightning-fast HMR), shadcn/ui + Radix UI (accessible components), Tailwind CSS v4.0 (utility-first, high-performance engine), Kea 3.1.6 (composable state management).</snippet>
      </doc>
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Decision Records</title>
        <section>ADR-001, ADR-002, ADR-006</section>
        <snippet>ADR-001 (Vite): Fast HMR critical for canvas/celebration development. ADR-002 (Kea): State management for 25+ logic stores (conversationLogic, canvasLogic, celebrationLogic, settingsLogic). ADR-006 (Tailwind v4.0): 5x faster builds, 100x faster incremental builds.</snippet>
      </doc>
      <doc>
        <path>docs/epics.md</path>
        <title>Epic Breakdown</title>
        <section>Epic 1: Foundation &amp; Infrastructure Setup - Story 1.1</section>
        <snippet>As a developer, I want a properly configured React + Vite project with TypeScript, so that I can build modern, type-safe frontend features efficiently. Acceptance criteria include Vite project with React 18.3.1, Tailwind CSS v4.0, shadcn/ui, Kea 3.1.6, ESLint/Prettier, working dev server with HMR.</snippet>
      </doc>
      <doc>
        <path>docs/PRD.md</path>
        <title>Product Requirements Document</title>
        <section>Technology Stack</section>
        <snippet>Frontend: React with Kea state management, KaTeX for math rendering. Target users: 9th-grade students (ages 14-15). Core features: Socratic questioning, visual input processing (OCR), conversation persistence, unwavering patience. Deployment: Railway hosts frontend static build.</snippet>
      </doc>
    </docs>
    <code>
      <!-- No existing frontend code - this is the first story establishing the foundation -->
    </code>
    <dependencies>
      <node>
        <dependency name="react" version="^18.3.1" type="production">Core UI library for component-based architecture</dependency>
        <dependency name="react-dom" version="^18.3.1" type="production">React DOM renderer</dependency>
        <dependency name="kea" version="^3.1.6" type="production">State management library for composable logic stores</dependency>
        <dependency name="kea-typegen" version="^3.1.6" type="production">TypeScript type generation for Kea</dependency>
        <dependency name="react-katex" version="^3.1.0" type="production">KaTeX math rendering (future stories)</dependency>
        <dependency name="katex" version="^0.16.11" type="production">LaTeX math rendering library (future stories)</dependency>
        <dependency name="socket.io-client" version="^4.8.1" type="production">WebSocket client for real-time chat (future stories)</dependency>
        <dependency name="vite" version="^6.0.0" type="development">Build tool with fast HMR</dependency>
        <dependency name="@vitejs/plugin-react" version="^4.3.4" type="development">Vite React plugin</dependency>
        <dependency name="typescript" version="^5.7.0" type="development">Type safety for complex state management</dependency>
        <dependency name="tailwindcss" version="^4.0.0" type="development">Utility-first CSS framework</dependency>
        <dependency name="postcss" version="latest" type="development">CSS processing for Tailwind</dependency>
        <dependency name="autoprefixer" version="latest" type="development">CSS vendor prefixing</dependency>
        <dependency name="@types/react" version="^18.3.12" type="development">TypeScript types for React</dependency>
        <dependency name="@types/react-dom" version="^18.3.1" type="development">TypeScript types for React DOM</dependency>
        <dependency name="eslint" version="^9.15.0" type="development">JavaScript/TypeScript linter</dependency>
        <dependency name="prettier" version="^3.4.1" type="development">Code formatter</dependency>
        <dependency name="eslint-config-prettier" version="latest" type="development">Prettier integration for ESLint</dependency>
      </node>
      <shadcnui>
        <component>button</component>
        <component>input</component>
        <component>dialog</component>
        <component>toast</component>
        <component>card</component>
        <component>label</component>
        <note>shadcn/ui components installed via CLI (npx shadcn-ui@latest add [component]). Uses Radix UI primitives for accessibility.</note>
      </shadcnui>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint>Project Structure: Must create frontend/ directory with specified structure: src/components/ui/, src/components/custom/, src/logic/, src/lib/, src/types/, src/assets/</constraint>
    <constraint>Naming Conventions: React Components use PascalCase (e.g., App.tsx), Kea Logic Stores use camelCase + "Logic" suffix (e.g., appLogic.ts), TypeScript interfaces prefix with "I" (e.g., IMessage)</constraint>
    <constraint>CSS Approach: Use Tailwind utilities only, no custom CSS classes unless absolutely necessary</constraint>
    <constraint>Development Server: Must start on http://localhost:5173 (Vite default)</constraint>
    <constraint>Performance Targets: Vite dev server startup &lt;1s, HMR update time &lt;100ms, frontend bundle size target &lt;500KB gzipped</constraint>
    <constraint>Code Quality: ESLint must report no errors, Prettier must format code consistently (semi: true, singleQuote: true, tabWidth: 2)</constraint>
    <constraint>First Story: This is the first story in Epic 1, establishing baseline structure with no conflicts</constraint>
  </constraints>
  <interfaces>
    <!-- No existing interfaces - this story creates the foundation for future API integrations -->
    <interface>
      <name>Vite Environment Variables</name>
      <kind>Configuration</kind>
      <signature>VITE_API_URL (development: http://localhost:5000, production: Railway backend URL), VITE_WS_URL (development: ws://localhost:5000, production: Railway WebSocket URL)</signature>
      <path>N/A - will be created in future stories</path>
    </interface>
  </interfaces>
  <tests>
    <standards>Unit Testing Framework: Vitest (Vite-native testing). Not required for this story (no complex logic yet). Future stories will add tests for Kea logic stores and utility functions. Target coverage: &gt;70% for critical utilities. Manual testing checklist includes verifying npm run dev starts successfully, HMR works, no console errors, Tailwind classes render correctly, shadcn/ui Button component renders and is clickable, ESLint reports no errors (npm run lint), and Prettier formats code (npm run format).</standards>
    <locations>
      <location>frontend/src/**/*.test.ts</location>
      <location>frontend/src/**/*.test.tsx</location>
      <note>Test files will be co-located with source files in future stories</note>
    </locations>
    <ideas>
      <idea ac="1">Verify package.json contains React 18.3.1+ and TypeScript 5.7.x+ (version check test)</idea>
      <idea ac="2">Verify Tailwind classes render correctly in App.tsx (manual visual test)</idea>
      <idea ac="3">Verify shadcn/ui Button component renders and is clickable (manual interaction test)</idea>
      <idea ac="4">Verify Kea imports work without errors (import test)</idea>
      <idea ac="5">Run ESLint and verify no errors: npm run lint (code quality test)</idea>
      <idea ac="5">Run Prettier and verify formatting: npm run format (code formatting test)</idea>
      <idea ac="6">Verify dev server starts on http://localhost:5173 (server startup test)</idea>
      <idea ac="7">Verify HMR updates browser instantly without full reload (manual HMR test)</idea>
    </ideas>
  </tests>
</story-context>
